{"version":3,"file":"main.52e2366ff017feec8752.hot-update.js","sources":["webpack:///./src/utils/renderer.js"],"sourcesContent":["import React from 'react'\nimport path from 'path'\nimport { renderToString } from 'react-dom/server'\nimport { StaticRouter } from 'react-router-dom'\nimport { HelmetProvider } from 'react-helmet-async'\nimport { ServerStyleSheet } from 'styled-components'\nimport { Provider } from 'react-redux'\nimport { ChunkExtractor, ChunkExtractorManager } from '@loadable/server'\nimport serialize from 'serialize-javascript'\nimport App from '../components/App/App';\n\nconst renderer = (req, store, context) => {\n  const helmetContext = {}\n  // Create the server side style sheet\n  const sheet = new ServerStyleSheet()\n\n  const extractor = new ChunkExtractor({\n    statsFile: path.resolve('./build/loadable-stats.json'),\n    entrypoints: ['client']\n  })\n\n  // When the app is rendered collect the styles that are used inside it\n  const markup = renderToString(\n    sheet.collectStyles(\n      <Provider store={store}>\n        <ChunkExtractorManager extractor={extractor}>\n          <StaticRouter context={context} location={req.url}>\n            <HelmetProvider context={helmetContext}>\n              <App />\n            </HelmetProvider>\n          </StaticRouter>\n        </ChunkExtractorManager>\n      </Provider>\n    )\n  )\n\n  // Generate all the style tags so they can be rendered into the page\n  const styleTags = sheet.getStyleTags()\n\n  // Receive the tags through the helmetContext\n  const { helmet } = helmetContext\n\n  return `\n    <!doctype html>\n      <html lang=\"en\">\n      <head>\n        <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" />\n        <meta charset=\"utf-8\" />\n        ${helmet.title.toString()}\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n        ${helmet.meta.toString()}\n        ${extractor.getLinkTags()}\n        ${extractor.getStyleTags()}\n      </head>\n      <body>\n        <div id=\"root\">${markup}</div>\n        <script>window.INITIAL_STATE = ${serialize(store.getState())}</script>\n        ${styleTags}\n        ${extractor.getScriptTags()}\n      </body>\n    </html>`\n}\n\nexport default renderer\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAFA;AACA;AAKA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAQA;AACA;AA3BA;AA+BA;AAmBA;AACA;AACA;;;;A","sourceRoot":""}